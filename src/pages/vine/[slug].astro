---
import Layouts from "../../Layout/Layouts.astro";

export async function getStaticPaths() {
  const data = await fetch("https://xqvteegxtrhyaxryzjmy.supabase.co/rest/v1/Vine", {
    method: "GET",
    headers: {
      apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhxdnRlZWd4dHJoeWF4cnl6am15Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODM3MDA4MTgsImV4cCI6MTk5OTI3NjgxOH0.fIAM4hosM6TLUsP1u7U7f2kO-f0G5EN_4OfCSRzoeg4",
    },
  }).then((response) => response.json());

  return data.map((vin) => {
    return {
      params: { slug: vin.slug },
      props: { myData: vin },
    };
  });
}
const { myData } = Astro.props;
console.log(myData);
---

<Layouts title={myData.id}>
  <main>
    <img src={`/img/produktimg${myData.img}`} alt="produktbillede" />
    <h1>{myData.titel}</h1>
    <h2>{myData.specifikationer}</h2>
    <p>{myData.beskrivelse}</p>
    <p>{myData.pris}</p>
  </main>
</Layouts>
